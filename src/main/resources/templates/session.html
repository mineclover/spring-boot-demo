<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>세션 관리 데모</title>
    <link rel="stylesheet" href="/css/session-style.css">
    <link rel="stylesheet" href="/css/toast.css">
    <link rel="stylesheet" href="/css/components.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/toast.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🔐 세션 관리 데모</h1>
            <div class="current-user">
                <span id="loginStatus">로그인되지 않음</span>
                <button id="logoutBtn" th:replace="~{fragments/components :: button('로그아웃', 'danger', 'logoutBtn', null, 'logout', null)}" style="display:none;"></button>
            </div>
        </header>

        <div class="main-content">
            <!-- 사이드바: 사용자 리스트 + 개인 정보 -->
            <aside class="sidebar">
                <h2>👥 사용자 목록</h2>
                <p class="sidebar-desc">클릭하여 로그인</p>
                <div id="userList" class="user-list"></div>

                <!-- 개인 정보 영역 (축소) -->
                <div class="personal-section-mini">
                    <h3>🔒 개인 정보</h3>
                    <div id="personalInfo" class="info-box-mini">
                        <div th:replace="~{fragments/components :: alert('로그인 후 확인', 'info')}" class="no-data"></div>
                    </div>
                </div>
            </aside>

            <!-- 메인 영역: 공유 게시판 -->
            <main class="board-main">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2>📝 공유 게시판</h2>
                    <button id="restoreDemoBtn" th:replace="~{fragments/components :: button('데모 게시글 복원', 'secondary', 'restoreDemoBtn', null, 'restore-demo', null)}" style="display:none;"></button>
                </div>

                <!-- 게시글 작성 폼 -->
                <div id="postForm" class="post-form" style="display:none;">
                    <div th:replace="~{fragments/components :: inputField('postTitle', '제목', '제목을 입력하세요', 'text')}"></div>
                    <textarea id="postContent" placeholder="내용" class="form-textarea"></textarea>
                    <button id="submitPost" th:replace="~{fragments/components :: button('게시글 작성', 'primary', 'submitPost', null, 'submit-post', null)}"></button>
                </div>
                <div id="loginRequired" class="login-required">
                    <div th:replace="~{fragments/components :: alert('게시글 작성은 로그인 후 가능합니다', 'warning')}"></div>
                </div>

                <!-- 게시글 목록 -->
                <div id="postList" class="post-list"></div>
            </main>
        </div>
    </div>

    <script src="/js/session-app.js"></script>
</body>
</html>